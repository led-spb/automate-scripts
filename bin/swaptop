#!/bin/sh

for file in /proc/*/status; do awk '/^VmSwap:/{swap_usage=$2$3} /^Pid:/{pid=$2}/^Name:/{name=$2} END{ print pid " " name " " swap_usage}' $file; done | sort -h -k3 -r
